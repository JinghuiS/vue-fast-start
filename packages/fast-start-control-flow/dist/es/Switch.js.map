{"version":3,"file":"Switch.js","sources":["../../src/If.vue","../../src/Switch.vue"],"sourcesContent":["<script setup lang=\"ts\" generic=\"T\">\ndefineOptions({\n    name: \"If\"\n})\ndefineProps<{\n    when: T | undefined | null | false\n}>()\n\nconst valueType = (item: any) => {\n    return item as NonNullable<T>\n}\n</script>\n\n<template>\n    <slot v-if=\"when\" :value=\"valueType(when)\" />\n    <slot v-else name=\"fallback\" />\n</template>\n","<script setup lang=\"ts\">\nimport { RendererElement, RendererNode, VNode, computed, useSlots } from \"vue\"\n\nimport If from \"./If.vue\"\nimport { MatchProps } from \"./type\"\n\ndefineOptions({\n    name: \"Switch\"\n})\nconst slots = useSlots()\nfunction getChildren() {\n    return slots.default ? slots.default() : null\n}\n\nfunction recursiveGetChildren(\n    children: VNode<\n        RendererNode,\n        RendererElement,\n        {\n            [key: string]: any\n        }\n    >[],\n    results: {\n        when?: MatchProps<any>[\"when\"]\n        slot?: VNode<any>\n    }[]\n) {\n    if (!results) {\n        results = []\n    }\n\n    if (!Array.isArray(children)) {\n        children = [children]\n    }\n\n    for (let i = 0; i < children.length; i++) {\n        const c = children[i].props!.when\n        if (c) {\n            return [i, c, children[i]]\n        }\n    }\n    return [-1]\n}\n\nconst columns = computed(() => {\n    let children = getChildren()\n\n    if (!children) {\n        return\n    }\n    const [index, when, cond] = recursiveGetChildren(children, [])\n\n    return {\n        index,\n        when,\n        slot: cond\n    }\n})\n</script>\n\n<template>\n    <If :when=\"columns?.index !== -1\">\n        <component :is=\"columns?.slot\" />\n        <template #fallback>\n            <slot name=\"fallback\" />\n        </template>\n    </If>\n</template>\n"],"names":["valueType","item","slots","useSlots","getChildren","recursiveGetChildren","children","results","i","c","columns","computed","index","when","cond"],"mappings":";;;;;;;;AAQM,UAAAA,IAAY,CAACC,MACRA;;;;;;;;;;ACAX,UAAMC,IAAQC;AACd,aAASC,IAAc;AACnB,aAAOF,EAAM,UAAUA,EAAM,QAAA,IAAY;AAAA,IAC7C;AAES,aAAAG,EACLC,GAOAC,GAIF;AAKE,MAAK,MAAM,QAAQD,CAAQ,MACvBA,IAAW,CAACA,CAAQ;AAGxB,eAASE,IAAI,GAAGA,IAAIF,EAAS,QAAQE,KAAK;AACtC,cAAMC,IAAIH,EAASE,CAAC,EAAE,MAAO;AAC7B,YAAIC;AACA,iBAAO,CAACD,GAAGC,GAAGH,EAASE,CAAC,CAAC;AAAA,MAEjC;AACA,aAAO,CAAC,EAAE;AAAA,IACd;AAEM,UAAAE,IAAUC,EAAS,MAAM;AAC3B,UAAIL,IAAWF;AAEf,UAAI,CAACE;AACD;AAEE,YAAA,CAACM,GAAOC,GAAMC,CAAI,IAAIT,EAAqBC,CAAY;AAEtD,aAAA;AAAA,QACH,OAAAM;AAAA,QACA,MAAAC;AAAA,QACA,MAAMC;AAAA,MAAA;AAAA,IACV,CACH;;;;;;;;;;;;;;;;;;;;;"}