{"version":3,"file":"Switch.js","sources":["../../src/If.vue","../../src/Switch.vue"],"sourcesContent":["<script setup lang=\"ts\" generic=\"T\">\ndefineOptions({\n    name: \"If\"\n})\ndefineProps<{\n    when: T | undefined | null | false\n}>()\n\nconst valueType = (item: any) => {\n    return item as NonNullable<T>\n}\n</script>\n\n<template>\n    <slot v-if=\"when\" :value=\"valueType(when)\" />\n    <slot v-else name=\"fallback\" />\n</template>\n","<script setup lang=\"ts\">\nimport { RendererElement, RendererNode, VNode, computed, useSlots } from \"vue\"\n\nimport If from \"./If.vue\"\nimport { MatchProps } from \"./type\"\n\ndefineOptions({\n    name: \"Switch\"\n})\nconst slots = useSlots()\nfunction getChildren() {\n    return slots.default ? slots.default() : null\n}\n\nfunction recursiveGetChildren(\n    children: VNode<\n        RendererNode,\n        RendererElement,\n        {\n            [key: string]: any\n        }\n    >[],\n    results: {\n        when?: MatchProps<any>[\"when\"]\n        slot?: VNode<any>\n    }[]\n) {\n    if (!results) {\n        results = []\n    }\n\n    if (!Array.isArray(children)) {\n        children = [children]\n    }\n\n    for (let i = 0; i < children.length; i++) {\n        const c = children[i].props!.when\n        if (c) {\n            return [i, c, children[i]]\n        }\n    }\n    return [-1]\n}\n\nconst columns = computed(() => {\n    let children = getChildren()\n\n    if (!children) {\n        return\n    }\n    const [index, when, cond] = recursiveGetChildren(children, [])\n\n    return {\n        index,\n        when,\n        slot: cond\n    }\n})\n</script>\n\n<template>\n    <If :when=\"columns?.index !== -1\">\n        <component :is=\"columns?.slot\" />\n        <template #fallback>\n            <slot name=\"fallback\" />\n        </template>\n    </If>\n</template>\n"],"names":["valueType","item","slots","useSlots","getChildren","recursiveGetChildren","children","results","i","c","columns","computed","index","when","cond"],"mappings":"0NAQM,MAAAA,EAAaC,GACRA,wLCAX,MAAMC,EAAQC,EAAAA,WACd,SAASC,GAAc,CACnB,OAAOF,EAAM,QAAUA,EAAM,QAAA,EAAY,IAC7C,CAES,SAAAG,EACLC,EAOAC,EAIF,CAKO,MAAM,QAAQD,CAAQ,IACvBA,EAAW,CAACA,CAAQ,GAGxB,QAASE,EAAI,EAAGA,EAAIF,EAAS,OAAQE,IAAK,CACtC,MAAMC,EAAIH,EAASE,CAAC,EAAE,MAAO,KAC7B,GAAIC,EACA,MAAO,CAACD,EAAGC,EAAGH,EAASE,CAAC,CAAC,CAEjC,CACA,MAAO,CAAC,EAAE,CACd,CAEM,MAAAE,EAAUC,EAAAA,SAAS,IAAM,CAC3B,IAAIL,EAAWF,IAEf,GAAI,CAACE,EACD,OAEE,KAAA,CAACM,EAAOC,EAAMC,CAAI,EAAIT,EAAqBC,CAAY,EAEtD,MAAA,CACH,MAAAM,EACA,KAAAC,EACA,KAAMC,CAAA,CACV,CACH"}